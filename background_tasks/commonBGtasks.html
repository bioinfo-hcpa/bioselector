<script>

    var nodeConsole = require('console');
    var myConsole = new nodeConsole.Console(process.stdout, process.stderr);

    const { PythonShell } = require('python-shell');
    const { ipcRenderer } = require('electron');
    const path = require('path');

    function setupBGtask(bgTask){

        ipcRenderer.on(bgTask.concat('START'), (event, args) => {

            const { data } = args;
            let pyshell = new PythonShell(path.join(__dirname, `/../scripts/${bgTask}.py`), {
                pythonPath: 'python3',
                args: [data]
            });

            pyshell.on('message', function(results) {
                ipcRenderer.send(bgTask.concat('MESSAGE'), { message: results });
            });
        });

        ipcRenderer.send(bgTask.concat('READY'));
    }

    let task = window.process.argv.slice(-1)[0]
    myConsole.log(task)
    setupBGtask(task)
    myConsole.log("it is working")

</script>
